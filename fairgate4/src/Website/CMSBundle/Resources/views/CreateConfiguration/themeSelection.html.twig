{% extends app.request.xmlHttpRequest ? '::ajax-layout.html.twig' : '::internal/layout.html.twig' %}
{% set pageTitle = 'CMS_THEME_CONFIG_CREATE'|trans %}
{% block customstylesheets %}
    <link href="{{ asset('fgassets/website/css/style-cms.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}
{% block pagecontent %}
    <div class="clearfix"> </div>
    <!-- BEGIN CONTAINER -->
    <div class="row fg-theme-green">
        <div class="col-md-12">
            <!-- BEGIN BREADCRUMB-->
            {% include 'internal/breadcrumb.html.twig' with breadCrumb %}
            <!-- END BREADCRUMB-->
            <!-- BEGIN PAGE TITLE AND PANEL TABS -->
            {% include 'global/page-title-bar.html.twig' with {'pageTitle': pageTitle, 'contactId': '', 'tabs': '', 'roleCount' : '' , 'type':'', 'url' : '', 'clubLanguages':'', 'clubDefaultLang':''} %}
            <!-- END PAGE TITLE AND PANEL TABS -->
            <!-- BEGIN CONTENT -->
            <div class="clearfix"></div>
            <div class="fg-theme-config-create-wrapper fg-marg-btm-20">
                <form class="form-horizontal fg-marg-top-20" id="fg-theme-creation-form">
                    <div class="portlet box fg-theme-head" id="form_wizard_1">
                        <div class="portlet-title">
                            <div class="caption"> <span class="step-title"> {{'TM_STEPS'|trans}}<span class="fg-curr-page"></span> {{'TM_STEPS_OF'|trans}}  3 </span> </div>
                        </div>
                        <div class="portlet-body form">
                            <div class="form-wizard fg-wizard-tabs">
                                <div class="form-body">
                                    <ul class="nav nav-pills nav-justified steps tab-steps">
                                        <li class="active" data-tab="theme"> <a href="#tab1" data-toggle="tab" class="step"> <span class="number"> 1 </span> <span class="desc"> <i class="fa fa-check"></i> {{'TM_TAB_THEME'|trans}}</span> </a> </li>
                                        <li class="" data-tab="color"> <a href="javascript:void(0)" class="step"> <span class="number"> 2 </span> <span class="desc"> <i class="fa fa-check"></i> {{'TM_TAB_COLOR'|trans}}</span> </a> </li>
                                        <li class="" data-tab="header"> <a href="javascript:void(0)" class="step"> <span class="number"> 3 </span> <span class="desc"> <i class="fa fa-check"></i> {{'TM_TAB_HEADER'|trans}}</span> </a> </li>

                                    </ul> 
                                    <div id="bar" class="progress progress-striped" role="progressbar">
                                        <div class="progress-bar progress-bar-warning fg-tm-progress-bar" style=""> </div>
                                    </div>
                                    <div class="tab-content">
                                        <div class="alert alert-danger tm-theme-error hide">
                                            <button data-dismiss="alert" class="close"></button>
                                            {{'TM_ERROR_DIALOG'|trans}}
                                        </div>
                                        <div class="tab-pane active" id="tab1">
                                            <form id="form-tab1" method="post" data-url="" class="form-horizontal">

                                                <div class="fg-tab-list fg-nl-lang-drop">
                                                    <h3 class="block">{{'TM_GIVE_TITLE'|trans}}</h3>
                                                    <dl class="col-md-8">
                                                        <div dataerror-group="" class="fg-theme-selection-error">
                                                            <dt class="control-label">{{'TM_CONF_TITLE'|trans}} <span class="required" aria-required="true"> * </span></dt>
                                                            <dd>
                                                                <input type="text" required="" name="subject" id="fg-conf-title" class="form-control" value="" maxlength="160">
                                                            </dd>
                                                        </div>
                                                    </dl>
                                                    <div class="clearfix"></div>
                                                    <h3 class="block">{{'TM_SELECT_THEME'|trans}}</h3>
                                                    <div class="fg-clear">
                                                        <ul class="fg-theme-layout-thumb-wrapper no-style fg-theme-layout-thumb-wrapper-step1">
                                                            {% for key, val in themeList %}                                                                
                                                            <li data-id="{{key}}" {% if(key == 1) %} class="selected" {% endif %}>
                                                                <img src="{{ asset('fgassets/website/img/'~val.themeOptions.themePreviewImage~'')}}" title="{{val.title}}" class="fg-thumb">
                                                            </li>
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="tab-pane" id="tab2">
                                            <form id="form-tab1" method="post" data-url="" class="form-horizontal">

                                                <div class="fg-tab-list fg-nl-lang-drop">
                                                    <h3 class="block">{{'TM_SELECT_COLOR_SCHEME'|trans}}</h3>
                                                    <div class="fg-clear">
                                                        <ul class="fg-theme-layout-thumb-wrapper no-style fg-theme-layout-thumb-wrapper-step2">
                                                        </ul>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="tab-pane" id="tab3">
                                           {% include 'WebsiteCMSBundle:CreateConfiguration:templateHeader.html.twig'%}

                                                            
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="form-actions right">
                                    <div class="row">
                                        <div class="col-md-12"> <a href="" class="btn default button-previous" id="tm_back_btn" style="display: none;"> {{'BACK'|trans}} </a>                                                                     
                                            <a href="javascript:;" class="btn green button-next pull-right confirmation" data-step="1" id="save_nd_continue"> {{'CONTINUE'|trans}} </a> 

                                            <a href="javascript:;" class="btn green button-submit pull-right" id="tm_send_btn" style="display: none;"> {{'SAVE'|trans}} </a> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
{% block underscoretemplate %}
    {% include 'WebsiteCMSBundle:CreateConfiguration:templateThemeConfigurationStep2.html.twig' %}
    {% include 'WebsiteCMSBundle:CreateConfiguration:templateHeaderUnderscore.html.twig' %}
    {% include 'WebsiteCMSBundle:CreateConfiguration:templateHeader2Underscore.html.twig' %}
    {% include 'ClubadminCommunicationBundle:Template:newsletterimage.html.twig'  %}
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="{{ asset('fgassets/website/js/Fg-tm-configuration-create.js')}}"></script>
    <script src="{{ asset('fgassets/global/js/jquery-fileupload/jquery.ui.widget.js')}}" type="text/javascript"></script>
    <script src="{{ asset('fgassets/global/js/jquery-fileupload/jquery.iframe-transport.js')}}" type="text/javascript"></script>
    <script src="{{ asset('fgassets/global/js/jquery-fileupload/jquery.fileupload.js')}}" type="text/javascript"></script>
    <script src="{{ asset('fgassets/internal/js/thumbnail.js') }}" type="text/javascript"></script>
    <script src="{{ asset('fgassets/global/js/FgFileUpload.js')}}" type="text/javascript"></script>
    <script src="{{ asset('fgcustom/js/page/imageUploader.js')}}" type="text/javascript"></script>
   
    <script>
        var themeList = {{themeListJson|raw}};
        var fgCreateConfSave = '{{path('website_theme_configuration_create_save')}}';
        var fgConfigListPath = '{{path('website_theme_configuration_list')}}';
        var headerLabels = {{headerLabels|json_encode|raw}};
        var configDetails = '';
        var headerPosition = 'full_width';
        var logoPosition = 'left';
        
        //Header Template Options
        var headerTemplate = 'fg-dropzone-underscore';
       $("#theme1Options").show();
       $("#theme2Options").hide();
        $(".fg-theme-layout-thumb-wrapper-step1 li").click(function(){
            if($(this).attr('data-id')=="1"){
                 headerTemplate = 'fg-dropzone-underscore';
                 $("#theme1Options").show();
                 $("#theme2Options").hide();
            }
            else if($(this).attr('data-id')=="2"){
                
                headerTemplate = 'fg-dropzone-underscore-theme2';
                 $("#theme1Options").hide();
                 $("#theme2Options").show();
            }
        });
        
        $(document).ready(function () {
            var cofigCreate = new FgConfigCreate;
            cofigCreate.createInit();
        });
        var headerpath = "";
        var headerid = 0;
         var  imageElementUploaderOptions = {
            fileListTemplate: 'dropzone-img-upload',
            dropZoneElement: '#fg-wrapper',
            fileTemplateContainer :'#fg-files-uploaded-lists-wrapper',
            fileListTemplateContainer: '#fg-files-uploaded-lists-wrapper',
            progressBarContainer: '.fg-upload-progress',
            progressBarElement: '.progress-bar',
            removeElement: '.removeUploadedFile',
            uploadUrl: '{{path('internal_article_tmp_upload_file',{'type':'dropzone'})}}',
            extraDataToTemplate: {},
            imagePreviewElement:'#cms_header',
            onFileUploadSuccess: 'ImagesUploader.setThumbnailMulti',
            onFileListAdd : 'ImagesUploader.createConfigDisabled',
            onRemoveFileEvent:'ImagesUploader.removeFileUpdate',
            errorContainer: '#image-upload-error-container',
            errorListTemplate: 'image-uploader-errorlist-template',
            fileListTemplatePlacement: 'append',
            previewClass:'.fg-dropzone-preview',
            removefileobj:'#deleteddragFiles',
            singleFile:true,
            updateFormstate:0,
            maxNumberOfFiles  : 1,
            pageName  : 'createlogo',
            removeElementdirty:1,
            validationErrorTemplateId:'fileUploadError',
            onFileUploadError:'ImagesUploader.serverErrorMessage',
            progressAllCallBack:function(){ 
                    $("#tm_back_btn").attr('disabled',false);
                  $("#tm_send_btn").attr('disabled',false);
                    
            },
            callbacks :
                {
                 fileuploadadd: 'ImagesUploader.updateSingleViewForLogo'
                },
            validations: {
                fileType: 'image',
                forbiddenFiletypes: globalForbiddenfiles,
            },
        };

      
        ImagesUploader.deleteElement();
        
    </script>
{% endblock %}