<?php 
/**
 * FgCmsPageContentTypeRepository.
 *
 * @package 	CommonUtilityBundle
 * @subpackage 	Repository
 * @author     	pitsolutions.ch
 * @version    	Fairgate V4
 *
 */
namespace Common\UtilityBundle\Repository\Cms;

use Doctrine\ORM\EntityRepository;

/**
 * FgCmsPageContentTypeRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class FgCmsPageContentTypeRepository extends EntityRepository
{

    /**
     * To retrieve the header details for edit page
     * 
     * @param string $clubType clubType
     * @return array header details
     */
    public function getHeaderDetails($clubType)
    {
        $headerDetails = $this->createQueryBuilder('t')
            ->select("t.id as id,t.type as type,t.logoName as logo,t.label as label")
            ->orderBy("t.sortOrder", "ASC");
        $result = $headerDetails->getQuery()->getArrayResult();

        foreach ($result as $key => $value) {
            if (($clubType == 'federation' || $clubType == 'sub_federation') && ($value['label'] == 'CMS_CONTACT_APPLICATION_FORM')) {
                unset($result[$key]);
            }
        }

        return $result;
    }
}
